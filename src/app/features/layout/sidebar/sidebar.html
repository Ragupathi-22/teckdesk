<!-- Mobile Backdrop -->
<div
  *ngIf="isMobile && isOpen"
  class="fixed inset-0 bg-black bg-opacity-30 z-40 md:hidden"
  (click)="closeSidebar.emit()"
></div>

<!-- Sidebar Container -->
<aside
  class="fixed top-0 left-0 h-full w-64 bg-indigo-800 text-white z-50 transform transition-transform duration-300 ease-in-out
         md:relative md:translate-x-0 md:flex md:flex-col"
  [class.-translate-x-full]="isMobile && !isOpen"
>
  <!-- Header -->
  <div class="p-4 border-b border-indigo-700">
    <h1 class="text-xl font-bold">IT Asset Manager</h1>
    <div class="mt-2 text-sm text-indigo-200">
      {{ dataService.getCompany()?.name }} - {{ this.dataService.getRole() === 'admin' ? 'Admin' : 'Employee' }}
    </div>
  </div>

  <!-- Navigation -->
  <nav class="flex-1 p-4 overflow-y-auto">
    <ul class="space-y-2">
      <ng-container *ngFor="let item of navItems">
        <li *ngIf="isVisible(item)">
          <a
            [routerLink]="item.to"
            routerLinkActive="bg-indigo-700 font-semibold"
            [routerLinkActiveOptions]="{ exact: true }"
            (click)="isMobile && closeSidebar.emit()"
            class="flex items-center p-2 rounded-md hover:bg-indigo-700 transition-colors"
          >
            <lucide-icon [name]="item.icon" class="mr-3 w-5 h-5" />
            {{ item.label }}
          </a>
        </li>
      </ng-container>
    </ul>
  </nav>

  <!-- Footer -->
  <div class="p-4 border-t border-indigo-700">
    <button
      (click)="logout()"
      class="flex items-center w-full p-2 rounded-md hover:bg-indigo-700 transition-colors"
    >
      <lucide-icon [name]="LucideIcons.LogOut" class="mr-3 w-5 h-5" />
      Logout
    </button>
  </div>
</aside>
